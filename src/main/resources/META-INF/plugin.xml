<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.yuxiaoyao.arthasideahelper</id>
    <name>Arthas Idea Helper</name>
    <vendor>yu-xiaoyao</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.plugins.terminal</depends>

    <!--    <depends>intellij.java.terminal</depends>-->
    <!--    <depends>com.intellij.terminal</depends>-->


    <!--
            <depends optional="true">com.intellij.spring.boot</depends>
    -->

    <resource-bundle>messages.MyBundle</resource-bundle>

    <applicationListeners>
        <!-- 程序执行监听 -->
        <listener class="com.github.yuxiaoyao.arthasideahelper.executor.ArthasHelperExecutionListener"
                  topic="com.intellij.execution.ExecutionListener"/>
    </applicationListeners>

    <actions>

        <action class="com.github.yuxiaoyao.arthasideahelper.action.AttachArthasAction" id="ArthasAttach">
            <add-to-group group-id="RunMenu" anchor="last"/>
        </action>

        <group id="ArthasAttachMoreGroup" popup="true"
               class="com.github.yuxiaoyao.arthasideahelper.actions.ArthasAttachMoreGroupActionGroup">
            <add-to-group group-id="RunMenu" relative-to-action="ArthasAttach" anchor="after"/>
        </group>

        <action id="OpenTelnetConsole"
                class="com.github.yuxiaoyao.arthasideahelper.action.OpenTelnetConsoleAction"
                text="Open Telnet Console"
                description="Open a Telnet session in ConsoleView">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <action id="OpenTelnetColoredConsole"
                class="com.github.yuxiaoyao.arthasideahelper.action.TelnetColoredConsoleAction"
                text="Open Telnet Colored Console"
                description="Open a Telnet session in ConsoleView">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>


        <action id="SendTelnetCommandAction"
                class="com.github.yuxiaoyao.arthasideahelper.action.SendTelnetCommandAction"
                text="Send Telnet Command"
                description="Send Telnet Command">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <action id="ArthasTestAction"
                class="com.github.yuxiaoyao.arthasideahelper.action.ArthasTestAction"
                text="Test Arthas">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

    </actions>

    <extensions defaultExtensionNs="com.intellij">

        <!-- secondary="true"    -->
        <toolWindow id="ArthasConsole"
                    factoryClass="com.github.yuxiaoyao.arthasideahelper.ArthasConsoleToolWindowsFactory"
                    anchor="bottom"
                    canCloseContents="true"
                    doNotActivateOnStart="true"
                    icon="AllIcons.Debugger.Console"
        />

        <!--
                <runConfigurationExtension
                        implementation="com.github.yuxiaoyao.arthasideaplugin.runconfig.ArthasRunConfigurationExtension"/>
        -->

        <!-- 通知 -->
        <notificationGroup displayType="STICKY_BALLOON"
                           id="com.github.yuxiaoyao.arthasideahelper.notification"
                           isLogByDefault="true"
                           toolWindowId="Event Log" bundle="messages.MyBundle"
                           key="notificationGroupId"/>


        <applicationService
                serviceImplementation="com.github.yuxiaoyao.arthasideahelper.settings.ArthasHelperSettings"/>

        <applicationConfigurable
                key="pluginName"
                instance="com.github.yuxiaoyao.arthasideahelper.settings.ArthasHelperConfigurable"
        />

        <projectConfigurable
                key="arthas.projectSettings"
                instance="com.github.yuxiaoyao.arthasideahelper.settings.ArthasHelperProjectConfigurable"
                parentId="com.github.yuxiaoyao.arthasideahelper.settings.ArthasHelperConfigurable"
        />

        <programRunner implementation="com.github.yuxiaoyao.arthasideahelper.runner.ArthasProgramRunner"/>
        <executor id="ArthasExecutor"
                  implementation="com.github.yuxiaoyao.arthasideahelper.executor.ArthasExecutor" order="last"/>

    </extensions>
</idea-plugin>
